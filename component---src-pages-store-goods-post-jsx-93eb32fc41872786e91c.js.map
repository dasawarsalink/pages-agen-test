{"version":3,"sources":["webpack://mainserv/./src/pages/store/goods/post.jsx"],"names":["Page","withStyles","theme","head","display","alignItems","classes","user","useUserInfo","store","useFetcher","features","React","title","setTitle","desc","setDesc","price","setPrice","stock","setStock","galleries","setGalleries","winalert","then","navigate","save","ajax","alert","catch","x","response","data","message","Link","color","to","fullWidth","label","variant","value","onChange","e","target","multiline","type","parseInt","margin","primary","flexGrow","multiple","onClick","disabled"],"mappings":"qSAoBMA,GAAOC,QAPE,SAAAC,GAAK,MAAK,CACrBC,KAAM,CACFC,QAAS,OACTC,WAAY,aAIPJ,EAAmB,YAAiB,EAAdK,QAAe,IACxCC,GAAOC,SACPC,GAAQC,OAAWH,GAAQA,EAAKI,SAASF,OAAS,sBACxD,EAA0BG,WAAe,IAAlCC,EAAP,KAAcC,EAAd,KACA,EAAwBF,WAAe,IAAhCG,EAAP,KAAaC,EAAb,KACA,EAA0BJ,WAAe,GAAlCK,EAAP,KAAcC,EAAd,KACA,EAA0BN,WAAe,GAAlCO,EAAP,KAAcC,EAAd,KACA,EAAkCR,WAAe,IAA1CS,EAAP,KAAkBC,EAAlB,KACAV,aAAgB,WACRL,IAASA,EAAKI,SAASF,QACvBc,QAAS,8BAA8BC,MAAK,kBAAMC,cAAS,gBAEhE,CAAClB,IACJ,IAAMmB,EAAO,WACTC,SAAU,uBAAwB,CAC9Bd,QACAE,OACAE,QACAE,QACAE,cACDG,MAAK,WACJI,MAAM,sBACNH,cAAS,cACVI,OAAM,SAAAC,GAAM,IAAD,EACVF,OAAM,UAAAE,EAAEC,gBAAF,eAAYC,KAAKC,UAAWH,EAAEG,aAG5C,OACI,gCACI,gBAAC,IAAD,MACA,gBAAC,IAAD,CAAOD,KAAMvB,IACR,kBACG,gBAAC,IAAD,KACI,gBAAC,IAAD,KACI,gBAAC,IAAD,KACI,gBAAC,EAAAyB,KAAD,CAAMC,MAAM,UAAUC,GAAG,WAAzB,aAGA,gBAAC,EAAAF,KAAD,CAAMC,MAAM,UAAUC,GAAG,iBAAzB,UAGA,gBAAC,IAAD,CAAYD,MAAM,eAAlB,YAGR,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAaE,WAAS,GAClB,gBAAC,IAAD,CAAWC,MAAM,QAAQC,QAAQ,WAAWC,MAAO3B,EAAO4B,SAAU,SAACC,GAAD,OAAO5B,EAAS4B,EAAEC,OAAOH,YAGrG,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAaH,WAAS,GAClB,gBAAC,IAAD,CAAWO,WAAS,EAACN,MAAM,YAAYC,QAAQ,WAAWC,MAAOzB,EAAM0B,SAAU,SAACC,GAAD,OAAO1B,EAAQ0B,EAAEC,OAAOH,YAGjH,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAaH,WAAS,GAClB,gBAAC,IAAD,CAAWC,MAAM,QAAQO,KAAK,SAASN,QAAQ,WAAWC,MAAOvB,EAAOwB,SAAU,SAACC,GAAD,OAAOxB,EAAS4B,SAASJ,EAAEC,OAAOH,YAExH,gBAAC,IAAD,CAAKO,OAAQ,IACb,gBAAC,IAAD,CAAaV,WAAS,GAClB,gBAAC,IAAD,CAAWC,MAAM,OAAOC,QAAQ,WAAWC,MAAOrB,EAAOsB,SAAU,SAACC,GAAD,OAAOtB,EAAS0B,SAASJ,EAAEC,OAAOH,aAG7G,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAcQ,QAAQ,WACtB,gBAAC,IAAD,CAAKC,SAAU,IACf,gBAAC,IAAD,CAAYC,UAAQ,EAACV,MAAOnB,EAAWoB,SAAUnB,KAErD,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAK2B,SAAU,IACf,gBAAC,IAAD,CAAQE,QAASzB,EAAM0B,WAAYvC,GAASE,GAAOwB,QAAQ,YAAYJ,MAAM,WAA7E,mBAW5B","file":"component---src-pages-store-goods-post-jsx-93eb32fc41872786e91c.js","sourcesContent":["import * as React from \"react\";\nimport { useUserInfo } from \"../../../components/save\";\nimport Defer from \"../../../components/ui/Defer\";\nimport ajax, { useFetcher } from '../../../components/ajax';\nimport Navbar from \"../../../components/ui/Navbar\";\nimport { Box, Breadcrumbs, Button, FormControl, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, TextField, Typography, withStyles } from \"@material-ui/core\";\nimport { Link, navigate } from \"gatsby\";\nimport { expandImg, winalert } from \"../../../components/util\";\nimport MediaInput from \"../../../components/ui/MediaInput\";\n\n/**\n * @type {import(\"@material-ui/core/styles/withStyles\").Styles<any, any>}\n */\nconst styles = theme => ({\n    head: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n});\n\nconst Page = withStyles(styles)(({ classes }) => {\n    const user = useUserInfo();\n    const store = useFetcher(user && user.features.store && '/market/store/info');\n    const [title, setTitle] = React.useState('');\n    const [desc, setDesc] = React.useState('');\n    const [price, setPrice] = React.useState(0);\n    const [stock, setStock] = React.useState(0);\n    const [galleries, setGalleries] = React.useState([]);\n    React.useEffect(() => {\n        if (user && !user.features.store) {\n            winalert('Anda belum punya akun toko').then(() => navigate('/store/'));\n        }\n    }, [user]);\n    const save = () => {\n        ajax.post('/market/store/goods/', {\n            title,\n            desc,\n            price,\n            stock,\n            galleries,\n        }).then(() => {\n            alert('Berhasil disimpan');\n            navigate('/store/');\n        }).catch(x => {\n            alert(x.response?.data.message || x.message);\n        });\n    }\n    return (\n        <>\n            <Navbar />\n            <Defer data={store}>\n                {() => (\n                    <List>\n                        <ListItem>\n                            <Breadcrumbs>\n                                <Link color=\"inherit\" to=\"/store/\">\n                                    Atur Toko\n                                </Link>\n                                <Link color=\"inherit\" to=\"/store/goods/\">\n                                    Barang\n                                </Link>\n                                <Typography color=\"textPrimary\">Tambah</Typography>\n                            </Breadcrumbs>\n                        </ListItem>\n                        <ListItem>\n                            <FormControl fullWidth>\n                                <TextField label=\"Judul\" variant=\"outlined\" value={title} onChange={(e) => setTitle(e.target.value)} />\n                            </FormControl>\n                        </ListItem>\n                        <ListItem>\n                            <FormControl fullWidth>\n                                <TextField multiline label=\"Deskripsi\" variant=\"outlined\" value={desc} onChange={(e) => setDesc(e.target.value)} />\n                            </FormControl>\n                        </ListItem>\n                        <ListItem>\n                            <FormControl fullWidth>\n                                <TextField label=\"Harga\" type=\"number\" variant=\"outlined\" value={price} onChange={(e) => setPrice(parseInt(e.target.value))} />\n                            </FormControl>\n                            <Box margin={1} />\n                            <FormControl fullWidth>\n                                <TextField label=\"Stok\" variant=\"outlined\" value={stock} onChange={(e) => setStock(parseInt(e.target.value))} />\n                            </FormControl>\n                        </ListItem>\n                        <ListItem>\n                            <ListItemText primary=\"Galeri\" />\n                            <Box flexGrow={1} />\n                            <MediaInput multiple value={galleries} onChange={setGalleries} />\n                        </ListItem>\n                        <ListItem>\n                            <Box flexGrow={1} />\n                            <Button onClick={save} disabled={!(title && desc)} variant=\"contained\" color=\"primary\">\n                                Simpan\n                            </Button>\n                        </ListItem>\n                    </List>\n                )}\n            </Defer>\n        </>\n    );\n});\n\nexport default Page;\n"],"sourceRoot":""}